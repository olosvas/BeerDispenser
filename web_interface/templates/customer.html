<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if language == "sk" %}Automatický výčapný systém{% else %}Automated Beer Dispensing System{% endif %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='custom.css') }}">
</head>
<body>
    <div class="container-fluid p-0">
        <div class="language-switcher">
            <a href="{{ url_for('customer', language='en') }}" class="language-option {% if language == 'en' %}active{% endif %}">
                <img src="{{ url_for('static', filename='flags/en.svg') }}" alt="English" class="flag-icon">
            </a>
            <a href="{{ url_for('customer', language='sk') }}" class="language-option {% if language == 'sk' %}active{% endif %}">
                <img src="{{ url_for('static', filename='flags/sk.svg') }}" alt="Slovak" class="flag-icon">
            </a>
        </div>
        <div class="row g-0 vh-100">
            <!-- Left panel with system image and status -->
            <div class="col-md-3 system-panel">
                <div class="system-image-container">
                    <img src="{{ url_for('static', filename='system.svg') }}" alt="Beer Dispensing System" class="img-fluid system-image">
                    
                    <div class="status-indicators">
                        <div class="status-item" id="cup-status">
                            <i class="fas fa-glass-whiskey me-2"></i>
                            <span class="status-label">{% if language == "sk" %}Poháre{% else %}Cups{% endif %}</span>
                            <span class="status-value" id="cup-level">
                                <span class="badge bg-success">{% if language == "sk" %}OK{% else %}OK{% endif %}</span>
                            </span>
                        </div>
                        
                        <div class="status-item" id="beer-status">
                            <i class="fas fa-beer me-2"></i>
                            <span class="status-label">{% if language == "sk" %}Pivo{% else %}Beer{% endif %}</span>
                            <span class="status-value" id="beer-level">
                                <span class="badge bg-success">{% if language == "sk" %}OK{% else %}OK{% endif %}</span>
                            </span>
                        </div>
                        
                        <div class="status-item" id="kofola-status">
                            <i class="fas fa-glass me-2"></i>
                            <span class="status-label">Kofola</span>
                            <span class="status-value" id="kofola-level">
                                <span class="badge bg-success">{% if language == "sk" %}OK{% else %}OK{% endif %}</span>
                            </span>
                        </div>
                        
                        <div class="status-item" id="system-status">
                            <i class="fas fa-cog me-2"></i>
                            <span class="status-label">{% if language == "sk" %}Systém{% else %}System{% endif %}</span>
                            <span class="status-value" id="general-status">
                                <span class="badge bg-success">{% if language == "sk" %}Pripravený{% else %}Ready{% endif %}</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right panel with customer interface -->
            <div class="col-md-9 customer-panel">
                <div class="progress-container mb-4">
                    <div class="progress" style="height: 10px;">
                        <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="progress-steps">
                        <div class="progress-step active" id="step-1">
                            <div class="progress-icon">
                                <i class="fas fa-glass-whiskey"></i>
                            </div>
                            <div class="progress-label">
                                {% if language == "sk" %}Výber{% else %}Selection{% endif %}
                            </div>
                        </div>
                        <div class="progress-step" id="step-2">
                            <div class="progress-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="progress-label">
                                {% if language == "sk" %}Overenie{% else %}Verification{% endif %}
                            </div>
                        </div>
                        <div class="progress-step" id="step-3">
                            <div class="progress-icon">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="progress-label">
                                {% if language == "sk" %}Platba{% else %}Payment{% endif %}
                            </div>
                        </div>
                        <div class="progress-step" id="step-4">
                            <div class="progress-icon">
                                <i class="fas fa-glass-cheers"></i>
                            </div>
                            <div class="progress-label">
                                {% if language == "sk" %}Výdaj{% else %}Dispensing{% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card main-card">
                    <div class="card-body p-4">
                        <!-- Selection screen -->
                        <div id="selection-screen" class="screen">
                            <h4 class="card-title text-center mb-4">{% if language == "sk" %}Vyberte si nápoj{% else %}Select Your Beverage{% endif %}</h4>
                            
                            <div class="beverage-selection mb-4">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="beverage-type-option" data-type="beer">
                                            <i class="fas fa-beer beverage-icon"></i>
                                            <div class="beverage-name">{% if language == "sk" %}Pivo{% else %}Beer{% endif %}</div>
                                            <div class="beverage-price">€3.00 - €5.00</div>
                                            <div class="age-restricted-badge">18+</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="beverage-type-option" data-type="kofola">
                                            <i class="fas fa-glass beverage-icon"></i>
                                            <div class="beverage-name">Kofola</div>
                                            <div class="beverage-price">€2.00 - €3.50</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="beverage-type-option" data-type="birel">
                                            <i class="fas fa-wine-bottle beverage-icon"></i>
                                            <div class="beverage-name">Birel</div>
                                            <div class="beverage-price">€2.50 - €4.00</div>
                                            <div class="age-restricted-badge">18+</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-3">
                                <button id="continue-type-btn" class="btn btn-primary btn-lg">
                                    <i class="fas fa-arrow-right me-2"></i> {% if language == "sk" %}Pokračovať{% else %}Continue{% endif %}
                                </button>
                            </div>
                            <div id="size-selection" class="size-selection mb-4 d-none">
                                <h5 class="text-center mb-3">{% if language == "sk" %}Vyberte veľkosť{% else %}Select Size{% endif %}</h5>
                                <div class="row justify-content-center">
                                    <div class="col-md-4">
                                        <div class="beverage-size-option" data-size="300">
                                            <div class="size-icon size-small"></div>
                                            <div class="size-name">{% if language == "sk" %}Malý (300ml){% else %}Small (300ml){% endif %}</div>
                                            <div class="size-price" id="small-price">€3.00</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="beverage-size-option" data-size="500">
                                            <div class="size-icon size-large"></div>
                                            <div class="size-name">{% if language == "sk" %}Veľký (500ml){% else %}Large (500ml){% endif %}</div>
                                            <div class="size-price" id="large-price">€5.00</div>
                                <div class="text-center mt-3">
                                    <button id="back-to-type-btn" class="btn btn-outline-secondary btn-lg me-2">
                                        <i class="fas fa-arrow-left me-2"></i> {% if language == "sk" %}Späť{% else %}Back{% endif %}
                                    </button>
                                    <button id="view-cart-from-size-btn" class="btn btn-primary btn-lg">
                                        <i class="fas fa-shopping-cart me-2"></i> {% if language == "sk" %}Zobraziť košík{% else %}View Cart{% endif %}
                                    </button>
                                </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="quantity-selection" class="quantity-selection mb-4 d-none">
                                <h5 class="text-center mb-3">{% if language == "sk" %}Vyberte množstvo{% else %}Select Quantity{% endif %}</h5>
                                <div class="quantity-controls">
                                    <button id="decrease-qty-btn" class="btn btn-outline-secondary btn-lg">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <div id="quantity-display">1</div>
                                    <button id="increase-qty-btn" class="btn btn-outline-secondary btn-lg">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                <span id="cart-count" class="badge bg-primary cart-count">0</span>
                                </div>
                            </div>
                            
                            <div class="text-center mt-4">
                                <button id="add-to-cart-btn" class="btn btn-primary btn-lg d-none">
                                    <i class="fas fa-cart-plus me-2"></i> {% if language == "sk" %}Pridať do košíka{% else %}Add to Cart{% endif %}
                                </button>
                            </div>
                            
                            <div id="cart-section" class="mt-5 d-none">
                                <h5 class="card-title">{% if language == "sk" %}Váš košík{% else %}Your Cart{% endif %}</h5>
                                
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>{% if language == "sk" %}Nápoj{% else %}Beverage{% endif %}</th>
                                                <th>{% if language == "sk" %}Veľkosť{% else %}Size{% endif %}</th>
                                                <th>{% if language == "sk" %}Množstvo{% else %}Quantity{% endif %}</th>
                                                <th>{% if language == "sk" %}Cena{% else %}Price{% endif %}</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody id="cart-items-container">
                                            <!-- Cart items will be added dynamically here -->
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="3" class="text-end fw-bold">{% if language == "sk" %}Celkom{% else %}Total{% endif %}</td>
                                                <td id="cart-total-price" class="fw-bold"></td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                                
                                <div class="text-center mt-4">
                                    <button id="continue-shopping-btn" class="btn btn-outline-secondary btn-lg me-2">
                                        <i class="fas fa-arrow-left me-2"></i> {% if language == "sk" %}Pokračovať v nákupe{% else %}Continue Shopping{% endif %}
                                    </button>
                                    <button id="proceed-to-verification-btn" class="btn btn-success btn-lg">
                                        <i class="fas fa-check-circle me-2"></i> {% if language == "sk" %}Pokračovať k overeniu{% else %}Proceed to Verification{% endif %}
                                    </button>
                                </div>
                            </div>
                            
                            <div class="text-center mt-5">
                                <div id="active-selection" class="d-none">
                                    <div class="active-selection-label">{% if language == "sk" %}Aktuálny výber{% else %}Current Selection{% endif %}</div>
                                    <div class="active-selection-value" id="selection-beverage"></div>
                                    <div class="active-selection-value" id="selection-size"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Verification screen -->
                        <div id="verification-screen" class="screen d-none">
                            <h4 class="card-title text-center mb-4">{% if language == "sk" %}Overenie veku{% else %}Age Verification{% endif %}</h4>
                            <p class="verification-info text-center">
                                {% if language == "sk" %}
                                Vaša objednávka obsahuje alkoholické nápoje, ktoré vyžadujú overenie veku.
                                Prosím, vyberte spôsob overenia:
                                {% else %}
                                Your order contains alcoholic beverages that require age verification.
                                Please select a verification method:
                                {% endif %}
                            </p>
                            
                            <div class="verification-options mt-4">
                                <div class="row justify-content-center">
                                    <div class="col-md-6">
                                        <div class="verification-option-card" id="webcam-option">
                                            <div class="verification-option-icon">
                                                <i class="fas fa-camera"></i>
                                            </div>
                                            <div class="verification-option-title">
                                                {% if language == "sk" %}Webkamera{% else %}Webcam{% endif %}
                                            </div>
                                            <div class="verification-option-description">
                                                {% if language == "sk" %}
                                                Použite webkameru na rýchle overenie vášho veku
                                                {% else %}
                                                Use webcam for quick age verification
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-4">
                                <button id="back-to-cart-btn" class="btn btn-outline-secondary btn-lg">
                                    <i class="fas fa-chevron-left me-2"></i> {% if language == "sk" %}Späť do košíka{% else %}Back to Cart{% endif %}
                                </button>
                            </div>
                        </div>
                        
                        <!-- Webcam verification -->
                        <div id="webcam-verification" class="d-none">
                            <h4 class="card-title text-center mb-4">{% if language == "sk" %}Overenie pomocou webkamery{% else %}Webcam Verification{% endif %}</h4>
                            
                            <div id="webcam-container" class="text-center mb-3">
                                <video id="webcam-video" autoplay playsinline class="img-fluid rounded mb-3"></video>
                                <canvas id="webcam-canvas" class="d-none"></canvas>
                                
                                <button id="webcam-start-btn" class="btn btn-primary btn-lg">
                                    <i class="fas fa-camera me-2"></i> {% if language == "sk" %}Spustiť kameru{% else %}Start Camera{% endif %}
                                </button>
                                
                                <button id="webcam-capture-btn" class="btn btn-success btn-lg d-none">
                                    <i class="fas fa-camera me-2"></i> {% if language == "sk" %}Zachytiť fotografiu{% else %}Capture Photo{% endif %}
                                </button>
                            </div>
                            
                            <div class="text-center">
                                <button id="webcam-back-btn" class="btn btn-outline-secondary btn-lg">
                                    <i class="fas fa-chevron-left me-2"></i> {% if language == "sk" %}Späť{% else %}Back{% endif %}
                                </button>
                            </div>
                        </div>
                        
                        <!-- Verification result -->
                        <div id="webcam-result" class="d-none">
                            <img id="captured-image" class="img-fluid rounded mb-3" alt="Captured photo" />
                            <div class="text-center mt-3">
                                <button id="webcam-retry-btn" class="btn btn-outline-secondary btn-lg me-2">
                                    <i class="fas fa-redo-alt me-2"></i> {% if language == "sk" %}Skúsiť znova{% else %}Try Again{% endif %}
                                </button>
                                <button id="webcam-use-btn" class="btn btn-success btn-lg">
                                    <i class="fas fa-check me-2"></i> {% if language == "sk" %}Použiť túto fotku{% else %}Use this Photo{% endif %}
                                </button>
                            </div>
                        </div>
                
                        <div id="webcam-loading" class="text-center py-4 d-none">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2">{% if language == "sk" %}Overovanie...{% else %}Verifying...{% endif %}</p>
                        </div>
                        
                        <div id="webcam-error" class="alert alert-danger mt-3 d-none" role="alert"></div>
                        
                        <!-- Payment screen -->
                        <div id="payment-screen" class="screen d-none">
                            <h4 class="card-title text-center mb-4">{% if language == "sk" %}Platba{% else %}Payment{% endif %}</h4>
                            
                            <div class="order-summary mb-4">
                                <h5>{% if language == "sk" %}Súhrn objednávky{% else %}Order Summary{% endif %}</h5>
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>{% if language == "sk" %}Nápoj{% else %}Beverage{% endif %}</th>
                                                <th>{% if language == "sk" %}Veľkosť{% else %}Size{% endif %}</th>
                                                <th>{% if language == "sk" %}Množstvo{% else %}Quantity{% endif %}</th>
                                                <th>{% if language == "sk" %}Cena{% else %}Price{% endif %}</th>
                                            </tr>
                                        </thead>
                                        <tbody id="payment-items">
                                            <!-- Payment items will be added dynamically here -->
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="3" class="text-end fw-bold">{% if language == "sk" %}Celkom{% else %}Total{% endif %}</td>
                                                <td id="payment-total" class="fw-bold"></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="payment-methods mb-4">
                                <h5 class="text-center mb-3">{% if language == "sk" %}Vyberte spôsob platby{% else %}Select Payment Method{% endif %}</h5>
                                <div class="row justify-content-center">
                                    <div class="col-md-4">
                                        <div class="payment-method-option active" data-method="card">
                                            <div class="payment-method-icon">
                                                <i class="fas fa-credit-card"></i>
                                            </div>
                                            <div class="payment-method-name">
                                                {% if language == "sk" %}Platobná karta{% else %}Credit Card{% endif %}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="payment-method-option" data-method="cash">
                                            <div class="payment-method-icon">
                                                <i class="fas fa-money-bill-wave"></i>
                                            </div>
                                            <div class="payment-method-name">
                                                {% if language == "sk" %}Hotovosť{% else %}Cash{% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-4">
                                <button id="back-to-verification-btn" class="btn btn-outline-secondary btn-lg me-2">
                                    <i class="fas fa-chevron-left me-2"></i> {% if language == "sk" %}Späť{% else %}Back{% endif %}
                                </button>
                                <button id="complete-payment-btn" class="btn btn-success btn-lg">
                                    <i class="fas fa-check-circle me-2"></i> {% if language == "sk" %}Zaplatiť{% else %}Complete Payment{% endif %}
                                </button>
                            </div>
                        </div>
                        
                        <!-- Dispensing screen -->
                        <div id="dispensing-screen" class="screen d-none">
                            <h4 class="card-title text-center mb-4">{% if language == "sk" %}Výdaj nápojov{% else %}Dispensing Beverages{% endif %}</h4>
                            
                            <div class="dispensing-status text-center">
                                <div class="dispensing-icon mb-3">
                                    <i class="fas fa-sync fa-spin"></i>
                                </div>
                                <h5 class="dispensing-message mb-3">
                                    {% if language == "sk" %}Prebieha výdaj nápojov...{% else %}Dispensing in progress...{% endif %}
                                </h5>
                                
                                <div class="dispensing-step-indicator">
                                    <div class="step-item active" id="dispense-step-1">
                                        <div class="step-icon">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                        <div class="step-name">{% if language == "sk" %}Výdaj pohára{% else %}Cup dispensing{% endif %}</div>
                                    </div>
                                    <div class="step-item" id="dispense-step-2">
                                        <div class="step-icon">
                                            <i class="fas fa-sync fa-spin"></i>
                                        </div>
                                        <div class="step-name">{% if language == "sk" %}Čapovanie{% else %}Pouring{% endif %}</div>
                                    </div>
                                    <div class="step-item" id="dispense-step-3">
                                        <div class="step-icon">
                                            <i class="fas fa-hourglass-half"></i>
                                        </div>
                                        <div class="step-name">{% if language == "sk" %}Doručenie{% else %}Delivery{% endif %}</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="current-dispensing-item mt-4">
                                <div class="current-item-label">{% if language == "sk" %}Aktuálne sa vydáva{% else %}Currently dispensing{% endif %}</div>
                                <div class="current-item-value" id="current-dispensing-beverage">
                                    {% if language == "sk" %}Pivo (500ml){% else %}Beer (500ml){% endif %}
                                </div>
                            </div>
                            
                            <div class="dispensing-queue mt-4" id="dispensing-queue">
                                <!-- Dispensing queue items will be added dynamically here -->
                            </div>
                        </div>
                        
                        <!-- Order complete screen -->
                        <div id="order-complete-screen" class="screen d-none">
                            <div class="order-complete-content text-center">
                                <div class="order-complete-icon mb-4">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <h4 class="order-complete-title mb-3">
                                    {% if language == "sk" %}Objednávka dokončená!{% else %}Order Complete!{% endif %}
                                </h4>
                                <p class="order-complete-message mb-4">
                                    {% if language == "sk" %}
                                    Vaše nápoje boli úspešne vydané. Ďakujeme za využitie našich služieb!
                                    {% else %}
                                    Your beverages have been successfully dispensed. Thank you for using our services!
                                    {% endif %}
                                </p>
                                <div class="text-center mt-4">
                                    <button id="new-order-btn" class="btn btn-primary btn-lg">
                                        <i class="fas fa-plus-circle me-2"></i> {% if language == "sk" %}Nová objednávka{% else %}New Order{% endif %}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='customer.js') }}"></script>
</body>
</html>